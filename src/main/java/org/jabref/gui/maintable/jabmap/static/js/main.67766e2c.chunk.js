(this["webpackJsonpmind-map"]=this["webpackJsonpmind-map"]||[]).push([[0],{109:function(e,t,n){},173:function(e,t,n){e.exports=n(392)},177:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},391:function(e,t,n){},392:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),i=n.n(o),c=(n(177),n(30)),s=n(59),l=n.n(s),d=n(105),u=n(31),m=n(155),f=n(17),p=(n(109),n(21)),h=n(50),g=n.n(h),E="READ",b="TO_READ",y="LOW_PRIORITY",v="FAVOURITE",O="NOT_FAVOURITE",I=function(e){var t=e.node,n=(e.id,e.colors,e.updateEdges),o=e.setSelectedNode,i=e.selectedNodeId,s=e.updateNode,l=(e.label,e.bibEntryId,e.isInSearch),d=["none","yellow","orange","red"],u=g()("/assets/Read.png"),m=Object(f.a)(u,1)[0],h=g()("/assets/ToRead.png"),y=Object(f.a)(h,1)[0],I=g()("/assets/priority.png"),w=Object(f.a)(I,1)[0],N=g()("/assets/Favourited.png"),k=Object(f.a)(N,1)[0],j=g()("/assets/NotFavourited.png"),x=Object(f.a)(j,1)[0],R=Object(a.useState)(),_=Object(f.a)(R,2),T=_[0],S=_[1];Object(a.useEffect)((function(){t.icons&&(t.icons.includes("HIGH_PRIORITY")?S(d[3]):t.icons.includes("MEDIUM_PRIORITY")?S(d[2]):t.icons.includes("LOW_PRIORITY")&&S(d[1]))}));return r.a.createElement(p.Group,{id:t.id,x:t.x_pos,y:t.y_pos,draggable:!0,onDragMove:function(e){t.x_pos=e.target.x(),t.y_pos=e.target.y(),s(t),n(t.id,e.target.x(),e.target.y())},onClick:function(){return o(t)},onMouseEnter:function(e){e.target.getStage().container().style.cursor="pointer"},onMouseLeave:function(e){e.target.getStage().container().style.cursor="default"}},r.a.createElement(p.Rect,{radius:{x:50,y:30},width:170,height:80,offsetX:85,offsetY:40,cornerRadius:20,fill:"white",strokeWidth:4}),r.a.createElement(p.Rect,{radius:{x:50,y:30},width:170,height:80,offsetX:85,offsetY:40,cornerRadius:20,fill:l?"#3f51b5":i===t.id?"#a2b8e5":void 0==t.colour?"white":t.colour+"80",stroke:void 0===t.colour?"#6E6E6E":t.colour,strokeWidth:4}),r.a.createElement(p.Text,{text:t.label,offsetX:85,offsetY:50,align:"center",verticalAlign:"middle",width:170,height:80}),r.a.createElement(p.Group,{width:170,height:80,offsetX:60,offsetY:-10},r.a.createElement(p.Image,{image:t.icons.includes(E)?m:y,width:24,height:24,offsetX:-50,onClick:function(){if(t.icons){var e=[];t.icons.includes(E)?(e=t.icons.filter((function(e){return e!==E}))).push(b):(e=t.icons.filter((function(e){return e!==b}))).push(E),t.icons=e,s(t)}}}),t.icons&&r.a.createElement(p.Image,{image:w,width:24,height:24,offsetX:-20,fill:"none"!==T?T:i===t.id?"#a2b8e5":"white",onClick:function(){if(t.icons){var e=[];if(t.icons.includes("HIGH_PRIORITY"))e=t.icons.filter((function(e){return"HIGH_PRIORITY"!==e})),S(d[0]);else if(t.icons.includes("MEDIUM_PRIORITY"))(e=t.icons.filter((function(e){return"MEDIUM_PRIORITY"!==e}))).push("HIGH_PRIORITY"),S(d[3]);else if(t.icons.includes("LOW_PRIORITY"))(e=t.icons.filter((function(e){return"LOW_PRIORITY"!==e}))).push("MEDIUM_PRIORITY"),S(d[2]);else{var n;(n=e).push.apply(n,Object(c.a)(t.icons)),e.push("LOW_PRIORITY"),S(d[1])}t.icons=e,s(t)}}}),r.a.createElement(p.Image,{image:t.icons.includes(v)?k:x,width:24,height:24,offsetX:-80,onClick:function(){if(t.icons){var e=[];t.icons.includes(v)?(e=t.icons.filter((function(e){return e!==v}))).push(O):(e=t.icons.filter((function(e){return e!==O}))).push(v),t.icons=e,s(t)}}})))},w=function(e){var t=e.x1,n=e.y1,a=e.x2,o=e.y2,i={st:[t,n],ct:[t,o,t,o],en:[a,o]};return r.a.createElement(p.Shape,{stroke:"#50618F",strokeWidth:6,lineCap:"round",sceneFunc:function(e,t){e.beginPath(),e.moveTo.apply(e,Object(c.a)(i.st)),e.bezierCurveTo.apply(e,Object(c.a)(i.ct).concat(Object(c.a)(i.en))),e.strokeShape(t)}})},N=n(425),k=function(e){var t=e.nodes,n=e.edges,a=e.updateEdges,o=e.setSelectedNode,i=e.selectedNodeId,c=e.updateNode;Object(N.a)({canvas:{left:"25%",position:"absolute"}})();return r.a.createElement(p.Group,{x:310},n.map((function(e){return r.a.createElement(w,{key:e.startID,x1:e.startX,y1:e.startY,x2:e.endX,y2:e.endY})})),t.map((function(e){return r.a.createElement(I,{node:e,key:e.id,label:e.label,colors:e.colors,id:e.id,x:e.x_pos,y:e.y_pos,colour:e.colour,updateEdges:a,selectedNodeId:i,setSelectedNode:o,updateNode:c,isInSearch:e.isInSearch})})))};function j(){var e=window;return{windowWidth:e.innerWidth,windowHeight:e.innerHeight}}function x(){var e=Object(a.useState)(j()),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r(j())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}var R=n(431),_=(n(225),n(393)),T=n(428),S=n(161),C=n(438),P=n(430);n(226);function Y(){var e=r.a.useState(null),t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"priority-menu"},r.a.createElement(T.a,{onClick:function(e){a(e.currentTarget)}},r.a.createElement("img",{src:"/assets/LowPriority.png",className:"main-button-icon"})),r.a.createElement(S.a,{id:"customized-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){a(null)}},r.a.createElement(C.a,null,r.a.createElement("img",{src:"/assets/LowPriority.png",className:"menu-buttons"}),r.a.createElement(P.a,{primary:"Low priority"})),r.a.createElement(C.a,null,r.a.createElement("img",{src:"/assets/MediumPriority.png",className:"menu-buttons"}),r.a.createElement(P.a,{primary:"Medium priority"})),r.a.createElement(C.a,null,r.a.createElement("img",{src:"/assets/HighPriority.png",className:"menu-buttons"}),r.a.createElement(P.a,{primary:"High priority"}))))}var L=r.a.memo((function(e){var t=e.selectedNode,n=e.updateNode,o=e.addNode,i=e.saveMap,c=e.deleteNode,s=e.searchNodes,l=e.linking,d=e.setLinking,u=e.unlinking,m=e.setUnlinking,f=(Object(N.a)({toolbar:{width:"100%",textAlign:"center"}})(),Object(a.useRef)(null));window.onkeydown=function(e){(114===e.keyCode||e.ctrlKey&&70===e.keyCode)&&(e.preventDefault(),f.current.focus())};return r.a.createElement(R.a,{className:"toolbar-proportions",component:_.a},r.a.createElement("div",{className:"buttons-container"},r.a.createElement(T.a,{size:"small","aria-label":"add",onClick:function(){return o()}},r.a.createElement("img",{src:"./assets/Add.png",alt:"Add",className:"toolbar-button"})),r.a.createElement(T.a,{size:"small",onClick:function(){return d(!l)},color:l?"primary":"default"},r.a.createElement("img",{src:"./assets/Link.png",alt:"Link",className:"toolbar-button "})),r.a.createElement(T.a,{size:"small",onClick:function(){return m(!u)},color:l?"primary":"default"},r.a.createElement("img",{src:"./assets/Unlink.png",alt:"Unlink",className:"toolbar-button "})),r.a.createElement("div",{className:"divider"}),r.a.createElement(T.a,{size:"small",onClick:function(){if(t.icons){var e=[];t.icons.includes(E)?(e=t.icons.filter((function(e){return e!==E}))).push(b):(e=t.icons.filter((function(e){return e!==b}))).push(E),t.icons=e,n(t)}}},r.a.createElement("img",{src:"./assets/MarkRead.png",alt:"Read Status",className:"toolbar-button"})),r.a.createElement(Y,null),r.a.createElement(T.a,{size:"small",onClick:function(){if(t.icons){var e=[];t.icons.includes(v)?(e=t.icons.filter((function(e){return e!==v}))).push(O):(e=t.icons.filter((function(e){return e!==O}))).push(v),t.icons=e,n(t)}}},r.a.createElement("img",{src:"./assets/Favourite.png",alt:"Favourite",className:"toolbar-button"})),r.a.createElement("div",{className:"divider"}),r.a.createElement(T.a,{size:"small",onClick:c},r.a.createElement("img",{src:"./assets/Trash.png",alt:"Delete Node",className:"trash-button"}))),r.a.createElement("div",{className:"search-container"},r.a.createElement(T.a,{size:"small",onClick:function(){return i()},style:{paddingLeft:"0.5em"}},r.a.createElement("img",{src:"./assets/Save.png",alt:"Priority",className:"toolbar-button save-button"})),r.a.createElement("select",{style:{border:"none",textAlign:"centre",fontSize:14,marginRight:30,marginLeft:30}},r.a.createElement("option",{value:"noFilter"}," No Filter "),r.a.createElement("option",{value:"highPriority"}," High Priority "),r.a.createElement("option",{value:"favourites"}," Low Priority "),r.a.createElement("option",{value:"favourites"}," Favourites ")),r.a.createElement("input",{className:"search-bar",id:"outlined-basic",onChange:s,ref:f,placeholder:"Search..."}),r.a.createElement(T.a,{size:"small",onClick:function(){return i()},style:{paddingLeft:"0.5em"}},r.a.createElement("img",{src:"./assets/Exit.png",alt:"Priority",className:"toolbar-button"}))))})),M=n(160),A=n(432),D=n(433),H=n(434),X=n(435),z=n(436),W=n(79),F=n(437),U=function(e){var t=e.node,n=e.reference,o=e.updateNode,i=e.changeNodeColor,c=Object(N.a)({panel:{position:"absolute",top:"10%",right:"1%",width:"300px",backgroundColor:"white","& td":{border:"none",padding:"10px"}}})(),s=Object(a.useRef)(),l=Object(a.useState)(),d=Object(f.a)(l,2),u=d[0],m=d[1];Object(a.useEffect)((function(){m(t.label),s.current.focus()}),[t]);return r.a.createElement(A.a,{className:c.panel},r.a.createElement(W.a,{gutterBottom:!0,variant:"h4",component:"h4",style:{textAlign:"center"}},"Node Info"),r.a.createElement(F.a,{style:{width:"calc(100% - 20px)",marginBottom:"10px",marginLeft:"10px"},InputLabelProps:{shrink:!0},id:"standard-basic",label:"Label",value:u,type:"text",inputRef:s,onChange:function(e){m(e.target.value),t.label=e.target.value,o(t)}}),r.a.createElement(D.a,{key:"colorEditor"},r.a.createElement(H.a,{component:"td",scope:"row",style:{border:"none",color:"#3f51b5"}},"Color:"),r.a.createElement(H.a,{component:"td",scope:"row",style:{border:"none"}},r.a.createElement(M.CirclePicker,{colors:["#BA1D2A","#FC6A38","#55773B","#279DA3","#0E5756"],onChange:i}))),n&&r.a.createElement(X.a,{className:c.table,"aria-label":"simple table"},r.a.createElement(W.a,{gutterBottom:!0,style:{paddingLeft:"10px",margin:0},variant:"h5",component:"h5"},"BibEntry"),r.a.createElement(z.a,null,r.a.createElement(D.a,{key:n.title},r.a.createElement(H.a,{component:"td",scope:"row",style:{color:"#3f51b5"}},"Title:"),r.a.createElement(H.a,{component:"td",scope:"row"},n.title)),r.a.createElement(D.a,{key:n.author},r.a.createElement(H.a,{component:"td",scope:"row",style:{color:"#3f51b5"}},"Author:"),r.a.createElement(H.a,{component:"td",scope:"row"},n.author)),r.a.createElement(D.a,{key:n.year},r.a.createElement(H.a,{component:"td",scope:"row",style:{color:"#3f51b5"}},"Year:"),r.a.createElement(H.a,{component:"td",scope:"row"},n.year)))))},B=(n(391),r.a.memo((function(e){var t=e.references,n=(e.setReferences,e.draggedRow),a=(e.addNode,x()),o=a.windowHeight,i=(a.windowWidth,new Array(Math.floor((o-20*t.length)/20)));i.fill(""),console.log(i);var c=function(e){if(e)return e.length>20?"".concat(e.substring(0,17),"..."):e};return r.a.createElement("div",{className:"table-proportions",style:{maxHeight:o}},r.a.createElement(A.a,{style:{width:"99.5%"}},r.a.createElement(W.a,{gutterBottom:!0,variant:"h4",component:"h4",style:{textAlign:"center",marginTop:"15px"}},"References"),r.a.createElement("div",null,r.a.createElement("table",{key:"reference-table",hover:"true",size:"small",className:"table-striped"},r.a.createElement("thead",{key:"table-header"},r.a.createElement("tr",{key:"table-header-row"},r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Year"))),r.a.createElement("tbody",{key:"table-body"},t&&t.map((function(e){return r.a.createElement("tr",{key:e.title,draggable:!0,onDragStart:function(t){n.current=e}},r.a.createElement("td",{key:e.title+"-title",className:"displayedText"},c(e.title),r.a.createElement("p",{className:"fullText"},e.title)),r.a.createElement("td",{key:e.title+"-author",className:"displayedText"},c(e.author),r.a.createElement("p",{className:"fullText"},e.author)),r.a.createElement("td",{key:e.title+"-year"},c(e.year)))})),i.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{className:"displayedText"},e),r.a.createElement("td",{className:"displayedText"}," "),r.a.createElement("td",{className:"displayedText"}," "))})))))))})));var G=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)([]),s=Object(f.a)(i,2),h=s[0],g=s[1],E=Object(a.useState)([{}]),v=Object(f.a)(E,2),I=v[0],w=v[1],j=Object(a.useState)({}),R=Object(f.a)(j,2),_=R[0],T=R[1],S=Object(a.useState)(4),C=Object(f.a)(S,2),P=(C[0],C[1],Object(a.useState)(!1)),Y=Object(f.a)(P,2),M=Y[0],A=Y[1],D=Object(a.useState)(!1),H=Object(f.a)(D,2),X=H[0],z=H[1],W=function(e){M||X?X?(F(_,e),z(!1)):M&&(q(_,e),A(!1),T(e)):T(e)},F=function(e,t){var n=h.filter((function(n){return n.startId===e.id&&n.endId===t.id||n.startId===t.id&&n.endId===e.id}));g(h.filter((function(e){return!n.includes(e)})))},G=function(e){var t=n.map((function(t){return e.id===t.id?e:t}));o(t)},K=function(e){n.forEach((function(t){e.indexOf(t.id)>-1?t.isInSearch=!0:t.isInSearch=!1,G(t)}))},J=(Object(N.a)({wrapper:{position:"relative"},canvas:{left:"25%",position:"absolute"}})(),function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://localhost:9898/libraries/current/map").then((function(e){return e.json()})).then((function(e){o(e.nodes.map((function(e){return-1===e.id?Object(u.a)(Object(u.a)({},e),{},{x_pos:ne/8,y_pos:te/3}):e}))),g(e.edges.map((function(t){var n=e.nodes.find((function(e){return e.id===t.node1_Id})),a=e.nodes.find((function(e){return e.id===t.node2_Id}));return{startId:t.node1_Id,startX:n.x_pos,startY:n.y_pos,endId:t.node2_Id,endX:a.x_pos,endY:a.y_pos}})))})).catch(console.log);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),V=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://localhost:9898/libraries/current/entries").then((function(e){return e.json()})).then((function(e){w(e)})).catch(console.log);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){V(),J()}),[]);var $=function(e,t,a){if(void 0!==_.id){var r,i;void 0===e?r="New Node":(i=e.citekey,r=e.title),void 0===t&&(t=0),void 0===a&&(a=400);var s={id:Math.floor(1e9*Math.random()),label:r,x_pos:t,y_pos:a,citationKey:i,icons:[b,y,O]};o([].concat(Object(c.a)(n),[s])),q(_,s),W(s)}},q=function(e,t){if(e.id!==t.id){var n={startId:e.id,startX:e.x_pos,startY:e.y_pos,endId:t.id,endX:t.x_pos,endY:t.y_pos};g([].concat(Object(c.a)(h),[n]))}},Q=Object(a.useRef)(),Z=Object(a.useRef)(),ee=x(),te=ee.windowHeight,ne=ee.windowWidth,ae=Object(a.useRef)();return window.addEventListener("keydown",(function(e){e.shiftKey&&13===e.keyCode?$(void 0,_.x_pos,_.y_pos-200):13===e.keyCode?$(void 0,_.x_pos,_.y_pos+200):45===e.keyCode&&$(void 0,_.x_pos-200,_.y_pos+200)}),!1),r.a.createElement("div",{className:"container"},r.a.createElement(B,{draggedRow:ae,addNode:$,references:I,setReferences:w,className:"references"}),r.a.createElement("div",{className:"map-container"},r.a.createElement(L,{selectedNode:_,updateNode:G,addNode:$,saveMap:function(){var e=h.map((function(e){return{node1_Id:e.startId,node2_Id:e.endId}})),t=JSON.stringify({nodes:n,edges:e});fetch("http://localhost:9898/libraries/current/map",{method:"PUT",headers:{"Content-Type":"application/json"},body:t})},deleteNode:function(){void 0!==_.id&&-1!==_.id&&(o(n.filter((function(e){return e.id!==_.id}))),g(h.filter((function(e){return e.startId!==_.id&&e.endId!==_.id}))),T(n[0]))},searchNodes:function(e){var t=e.target.value,a=[];""!==t?(n.forEach((function(e){e.label.indexOf(t)>-1&&a.push(e.id)})),K(a)):K(a)},linking:M,setLinking:A,unlinking:X,setUnlinking:z}),r.a.createElement("div",{onDrop:function(e){Z.current.setPointersPositions(e);var t=Z.current.getPointerPosition(),n=t.x,a=t.y;$(ae.current,n-.25*te-75,a)},onDragOver:function(e){return e.preventDefault()}},r.a.createElement(p.Stage,{style:{left:"25%",position:"absolute",top:"64px",margin:0,padding:0},width:.75*ne,height:te-64,ref:Z},r.a.createElement(p.Layer,{ref:Q},r.a.createElement(k,{nodes:n,edges:h,updateEdges:function(e,t,n){var a=h.map((function(a){return a.startId===e?Object(u.a)(Object(u.a)({},a),{},{startX:t,startY:n}):a.endId===e?Object(u.a)(Object(u.a)({},a),{},{endX:t,endY:n}):a}));g(a)},updateNode:G,selectedNodeId:_.id,setSelectedNode:W,updateSearchIndex:K})))),_.id?r.a.createElement(U,{node:_,reference:function(e){var t,n=Object(m.a)(I);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.citekey===e)return a}}catch(r){n.e(r)}finally{n.f()}}(_.citationKey),updateNode:G,changeNodeColor:function(e,t){!function(e,t){var a=n.map((function(n){return n.id===e?Object(u.a)(Object(u.a)({},n),{},{colour:t}):n}));o(a)}(_.id,e.hex)}}):r.a.createElement(U,{node:_,updateNode:G})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[173,1,2]]]);
//# sourceMappingURL=main.67766e2c.chunk.js.map