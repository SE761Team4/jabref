(this["webpackJsonpmind-map"]=this["webpackJsonpmind-map"]||[]).push([[0],{109:function(e,t,n){},173:function(e,t,n){e.exports=n(392)},177:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},391:function(e,t,n){},392:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),i=n.n(o),c=(n(177),n(41)),s=n(59),l=n.n(s),d=n(105),u=n(30),m=n(155),f=n(16),p=(n(109),n(18)),h=n(36),g=n.n(h),E="READ",b="TO_READ",y="HIGH_PRIORITY",v="MEDIUM_PRIORITY",N="LOW_PRIORITY",w="FAVOURITE",k="NOT_FAVOURITE",O=function(e){var t=e.node,n=e.updateNode,o=g()("/assets/Read.png"),i=Object(f.a)(o,1)[0],c=g()("/assets/ToRead.png"),s=Object(f.a)(c,1)[0],l=g()("/assets/HighPriority.png"),d=Object(f.a)(l,1)[0],u=g()("/assets/MediumPriority.png"),m=Object(f.a)(u,1)[0],h=g()("/assets/LowPriority.png"),O=Object(f.a)(h,1)[0],j=g()("/assets/Favourited.png"),x=Object(f.a)(j,1)[0],I=g()("/assets/NotFavourited.png"),C=Object(f.a)(I,1)[0];Object(a.useEffect)((function(){}),[t.icons]);var _=function(){if(t.icons){var e=[];t.icons.includes(E)?(e=t.icons.filter((function(e){return e!==E}))).push(b):(e=t.icons.filter((function(e){return e!==b}))).push(E),t.icons=e,n(t)}};return r.a.createElement(p.Group,{width:170,height:80,offsetX:75,offsetY:-20},r.a.createElement(p.Image,{image:t.icons.includes(E)?i:s,width:24,height:24,offsetX:-50,onClick:_}),t.icons.includes(y)&&r.a.createElement(p.Image,{image:d,width:24,height:24,offsetX:-20,onClick:_}),t.icons.includes(v)&&r.a.createElement(p.Image,{image:m,width:24,height:24,offsetX:-20,onClick:_}),t.icons.includes(N)&&r.a.createElement(p.Image,{image:O,width:24,height:24,offsetX:-20,onClick:_}),r.a.createElement(p.Image,{image:t.icons.includes(w)?x:C,width:24,height:24,offsetX:-80,onClick:function(){if(t.icons){var e=[];t.icons.includes(w)?(e=t.icons.filter((function(e){return e!==w}))).push(k):(e=t.icons.filter((function(e){return e!==k}))).push(w),t.icons=e,n(t)}}}))};function j(e){if(e)return e.length>20?"".concat(e.substring(0,17),"..."):e}var x=function(e){var t=e.node,n=e.updateEdges,a=e.setSelectedNode,o=e.selectedNodeId,i=e.updateNode,c=(e.label,e.bibEntryId,e.isInSearch);return r.a.createElement(p.Group,{id:t.id,x:t.x_pos,y:t.y_pos,draggable:!0,onDragMove:function(e){t.x_pos=e.target.x(),t.y_pos=e.target.y(),i(t),n(t.id,e.target.x(),e.target.y())},onClick:function(){return a(t)},onMouseEnter:function(e){e.target.getStage().container().style.cursor="pointer"},onMouseLeave:function(e){e.target.getStage().container().style.cursor="default"}},r.a.createElement(p.Rect,{radius:{x:50,y:30},width:170,height:80,offsetX:85,offsetY:40,cornerRadius:20,fill:"white",strokeWidth:4}),r.a.createElement(p.Rect,{radius:{x:50,y:30},width:170,height:80,offsetX:85,offsetY:40,cornerRadius:20,fill:c?"#3f51b5":o===t.id?"#a2b8e5":void 0==t.colour?"white":t.colour+"80",stroke:void 0===t.colour?"#6E6E6E":t.colour,strokeWidth:4}),r.a.createElement(p.Text,{text:j(t.label),offsetX:85,offsetY:50,align:"center",verticalAlign:"middle",width:170,height:80}),r.a.createElement(O,{node:t,updateNode:i}))},I=function(e){var t=e.x1,n=e.y1,a=e.x2,o=e.y2,i={st:[t,n],ct:[t,o,t,o],en:[a,o]};return r.a.createElement(p.Shape,{stroke:"#50618F",strokeWidth:6,lineCap:"round",sceneFunc:function(e,t){e.beginPath(),e.moveTo.apply(e,Object(c.a)(i.st)),e.bezierCurveTo.apply(e,Object(c.a)(i.ct).concat(Object(c.a)(i.en))),e.strokeShape(t)}})},C=n(425),_=function(e){var t=e.nodes,n=e.edges,a=e.updateEdges,o=e.setSelectedNode,i=e.selectedNodeId,c=e.updateNode;Object(C.a)({canvas:{left:"25%",position:"absolute"}})();return r.a.createElement(p.Group,{x:310},n.map((function(e){return r.a.createElement(I,{key:e.startID,x1:e.startX,y1:e.startY,x2:e.endX,y2:e.endY})})),t.map((function(e){return r.a.createElement(x,{node:e,key:e.id,label:e.label,x:e.x_pos,y:e.y_pos,colour:e.colour,updateEdges:a,selectedNodeId:i,setSelectedNode:o,updateNode:c,isInSearch:e.isInSearch})})))};function S(){var e=window;return{windowWidth:e.innerWidth,windowHeight:e.innerHeight}}function R(){var e=Object(a.useState)(S()),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r(S())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}var T=n(431),P=(n(225),n(393)),L=n(428),A=n(161),X=n(438),Y=n(430),M=(n(226),"High priority"),z="Medium priority",D="Low priority",F=r.a.memo((function(e){var t=e.selectedNode,n=e.updateNode,a=r.a.useState(null),o=Object(f.a)(a,2),i=o[0],c=o[1],s=function(){c(null)},l=function(e){if(t.icons)if(e.target.textContent==M){var a=[];(a=t.icons.filter((function(e){return e!==v&&e!==N}))).push(y),t.icons=a,n(t)}else if(e.target.textContent==z){var r=[];(r=t.icons.filter((function(e){return e!==y&&e!==N}))).push(v),t.icons=r,n(t)}else if(e.target.textContent==D){var o=[];(o=t.icons.filter((function(e){return e!==v&&e!==y}))).push(N),t.icons=o,n(t)}s()};return r.a.createElement("div",{className:"priority-menu"},r.a.createElement(L.a,{onClick:function(e){c(e.currentTarget)}},r.a.createElement("img",{src:"./assets/LowPriority.png",className:"main-button-icon"})),r.a.createElement(A.a,{id:"customized-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:s},r.a.createElement(X.a,{onClick:l},r.a.createElement("img",{src:"./assets/LowPriority.png",alt:"low-priority",className:"menu-buttons"}),r.a.createElement(Y.a,{primary:D})),r.a.createElement(X.a,{onClick:l},r.a.createElement("img",{src:"./assets/MediumPriority.png",alt:"medium-priority",className:"menu-buttons"}),r.a.createElement(Y.a,{primary:z})),r.a.createElement(X.a,{onClick:l},r.a.createElement("img",{src:"/assets/HighPriority.png",alt:"high-priority",className:"menu-buttons"}),r.a.createElement(Y.a,{primary:M}))))})),H=r.a.memo((function(e){var t=e.selectedNode,n=e.updateNode,o=e.addNode,i=e.saveMap,c=e.deleteNode,s=e.searchNodes,l=e.linking,d=e.setLinking,u=e.unlinking,m=e.setUnlinking,f=(Object(C.a)({toolbar:{width:"100%",textAlign:"center"}})(),Object(a.useRef)(null));window.onkeydown=function(e){(114===e.keyCode||e.ctrlKey&&70===e.keyCode)&&(e.preventDefault(),f.current.focus())};return r.a.createElement(T.a,{className:"toolbar-proportions",component:P.a},r.a.createElement("div",{className:"buttons-container"},r.a.createElement(L.a,{size:"small","aria-label":"add",onClick:function(){return o()}},r.a.createElement("img",{src:"./assets/Add.png",alt:"Add",className:"toolbar-button"})),r.a.createElement(L.a,{size:"small",onClick:function(){return d(!l)},color:l?"primary":"default"},r.a.createElement("img",{src:"./assets/Link.png",alt:"Link",className:"toolbar-button "})),r.a.createElement(L.a,{size:"small",onClick:function(){return m(!u)},color:l?"primary":"default"},r.a.createElement("img",{src:"./assets/Unlink.png",alt:"Unlink",className:"toolbar-button "})),r.a.createElement("div",{className:"divider"}),r.a.createElement(L.a,{size:"small",onClick:function(){if(t.icons){var e=[];t.icons.includes(E)?(e=t.icons.filter((function(e){return e!==E}))).push(b):(e=t.icons.filter((function(e){return e!==b}))).push(E),t.icons=e,n(t)}}},r.a.createElement("img",{src:"./assets/MarkRead.png",alt:"Read Status",className:"toolbar-button"})),r.a.createElement(F,{selectedNode:t,updateNode:n}),r.a.createElement(L.a,{size:"small",onClick:function(){if(t.icons){var e=[];t.icons.includes(w)?(e=t.icons.filter((function(e){return e!==w}))).push(k):(e=t.icons.filter((function(e){return e!==k}))).push(w),t.icons=e,n(t)}}},r.a.createElement("img",{src:"./assets/Favourite.png",alt:"Favourite",className:"toolbar-button"})),r.a.createElement("div",{className:"divider"}),r.a.createElement(L.a,{size:"small",onClick:c},r.a.createElement("img",{src:"./assets/Trash.png",alt:"Delete Node",className:"trash-button"}))),r.a.createElement("div",{className:"search-container"},r.a.createElement(L.a,{size:"small",onClick:function(){return i()},style:{paddingLeft:"0.5em"}},r.a.createElement("img",{src:"./assets/Save.png",alt:"Priority",className:"toolbar-button save-button"})),r.a.createElement("select",{style:{border:"none",textAlign:"centre",fontSize:14,marginRight:30,marginLeft:30}},r.a.createElement("option",{value:"noFilter"}," No Filter "),r.a.createElement("option",{value:"highPriority"}," High Priority "),r.a.createElement("option",{value:"favourites"}," Low Priority "),r.a.createElement("option",{value:"favourites"}," Favourites ")),r.a.createElement("input",{className:"search-bar",id:"outlined-basic",onChange:s,ref:f,placeholder:"Search..."}),r.a.createElement(L.a,{size:"small",onClick:function(){return i()},style:{paddingLeft:"0.5em"}},r.a.createElement("img",{src:"./assets/Exit.png",alt:"Priority",className:"toolbar-button"}))))})),B=n(160),W=n(432),U=n(433),G=n(434),K=n(435),J=n(436),V=n(79),$=n(437),q=function(e){var t=e.node,n=e.reference,o=e.updateNode,i=e.changeNodeColor,c=Object(C.a)({panel:{position:"absolute",top:"10%",right:"1%",width:"300px",backgroundColor:"white","& td":{border:"none",padding:"10px"}}})(),s=Object(a.useRef)(),l=Object(a.useState)(),d=Object(f.a)(l,2),u=d[0],m=d[1];Object(a.useEffect)((function(){m(t.label),s.current.focus()}),[t]);return r.a.createElement(W.a,{className:c.panel},r.a.createElement(V.a,{gutterBottom:!0,variant:"h4",component:"h4",style:{textAlign:"center"}},"Node Info"),r.a.createElement($.a,{style:{width:"calc(100% - 20px)",marginBottom:"10px",marginLeft:"10px"},InputLabelProps:{shrink:!0},id:"standard-basic",label:"Label",value:u,type:"text",inputRef:s,onChange:function(e){m(e.target.value),t.label=e.target.value,o(t)}}),r.a.createElement(U.a,{key:"colorEditor"},r.a.createElement(G.a,{component:"td",scope:"row",style:{border:"none",color:"#3f51b5"}},"Color:"),r.a.createElement(G.a,{component:"td",scope:"row",style:{border:"none"}},r.a.createElement(B.CirclePicker,{colors:["#BA1D2A","#FC6A38","#55773B","#279DA3","#0E5756"],onChange:i}))),n&&r.a.createElement(K.a,{className:c.table,"aria-label":"simple table"},r.a.createElement(V.a,{gutterBottom:!0,style:{paddingLeft:"10px",margin:0},variant:"h5",component:"h5"},"BibEntry"),r.a.createElement(J.a,null,r.a.createElement(U.a,{key:n.title},r.a.createElement(G.a,{component:"td",scope:"row",style:{color:"#3f51b5"}},"Title:"),r.a.createElement(G.a,{component:"td",scope:"row"},n.title)),r.a.createElement(U.a,{key:n.author},r.a.createElement(G.a,{component:"td",scope:"row",style:{color:"#3f51b5"}},"Author:"),r.a.createElement(G.a,{component:"td",scope:"row"},n.author)),r.a.createElement(U.a,{key:n.year},r.a.createElement(G.a,{component:"td",scope:"row",style:{color:"#3f51b5"}},"Year:"),r.a.createElement(G.a,{component:"td",scope:"row"},n.year)))))},Q=(n(391),r.a.memo((function(e){var t=e.references,n=(e.setReferences,e.draggedRow),a=(e.addNode,R()),o=a.windowHeight,i=(a.windowWidth,new Array(Math.floor((o-20*t.length)/20)));return i.fill(""),r.a.createElement("div",{className:"table-proportions",style:{maxHeight:o}},r.a.createElement(W.a,{style:{width:"99.5%"}},r.a.createElement(V.a,{gutterBottom:!0,variant:"h4",component:"h4",style:{textAlign:"center",marginTop:"15px"}},"References"),r.a.createElement("div",null,r.a.createElement("table",{key:"reference-table",hover:"true",size:"small",className:"table-striped"},r.a.createElement("thead",{key:"table-header"},r.a.createElement("tr",{key:"table-header-row"},r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Year"))),r.a.createElement("tbody",{key:"table-body"},t&&t.map((function(e){return r.a.createElement("tr",{key:e.title,draggable:!0,onDragStart:function(t){n.current=e}},r.a.createElement("td",{key:e.title+"-title",className:"displayedText"},j(e.title),r.a.createElement("p",{className:"fullText"},e.title)),r.a.createElement("td",{key:e.title+"-author",className:"displayedText"},j(e.author),r.a.createElement("p",{className:"fullText"},e.author)),r.a.createElement("td",{key:e.title+"-year"},j(e.year)))})),i.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{className:"displayedText"},e),r.a.createElement("td",{className:"displayedText"}," "),r.a.createElement("td",{className:"displayedText"}," "))})))))))})));var Z=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)([]),s=Object(f.a)(i,2),h=s[0],g=s[1],E=Object(a.useState)([{}]),y=Object(f.a)(E,2),v=y[0],w=y[1],O=Object(a.useState)({}),j=Object(f.a)(O,2),x=j[0],I=j[1],S=Object(a.useState)(4),T=Object(f.a)(S,2),P=(T[0],T[1],Object(a.useState)(!1)),L=Object(f.a)(P,2),A=L[0],X=L[1],Y=Object(a.useState)(!1),M=Object(f.a)(Y,2),z=M[0],D=M[1],F=function(e){A||z?z?(B(x,e),D(!1)):A&&(V(x,e),X(!1),I(e)):I(e)},B=function(e,t){var n=h.filter((function(n){return n.startId===e.id&&n.endId===t.id||n.startId===t.id&&n.endId===e.id}));g(h.filter((function(e){return!n.includes(e)})))},W=function(e){var t=n.map((function(t){return e.id===t.id?e:t}));o(t)},U=function(e){n.forEach((function(t){e.indexOf(t.id)>-1?t.isInSearch=!0:t.isInSearch=!1,W(t)}))},G=(Object(C.a)({wrapper:{position:"relative"},canvas:{left:"25%",position:"absolute"}})(),function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://localhost:9898/libraries/current/map").then((function(e){return e.json()})).then((function(e){o(e.nodes.map((function(e){return-1===e.id?Object(u.a)(Object(u.a)({},e),{},{x_pos:ne/8,y_pos:te/3}):e}))),g(e.edges.map((function(t){var n=e.nodes.find((function(e){return e.id===t.node1_Id})),a=e.nodes.find((function(e){return e.id===t.node2_Id}));return{startId:t.node1_Id,startX:n.x_pos,startY:n.y_pos,endId:t.node2_Id,endX:a.x_pos,endY:a.y_pos}})))})).catch("Error: "+console.log);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),K=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://localhost:9898/libraries/current/entries").then((function(e){return e.json()})).then((function(e){w(e)})).catch(console.log);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){K(),G()}),[]);var J=function(e,t,a){if(void 0!==x.id){var r,i;void 0===e?r="New Node":(i=e.citekey,r=e.title),void 0===t&&(t=0),void 0===a&&(a=400);var s={id:Math.floor(1e9*Math.random()),label:r,x_pos:t,y_pos:a,citationKey:i,icons:[b,N,k]};o([].concat(Object(c.a)(n),[s])),V(x,s),F(s)}},V=function(e,t){if(e.id!==t.id){var n={startId:e.id,startX:e.x_pos,startY:e.y_pos,endId:t.id,endX:t.x_pos,endY:t.y_pos};g([].concat(Object(c.a)(h),[n]))}},$=Object(a.useRef)(),Z=Object(a.useRef)(),ee=R(),te=ee.windowHeight,ne=ee.windowWidth,ae=Object(a.useRef)();return window.addEventListener("keydown",(function(e){e.shiftKey&&13===e.keyCode?J(void 0,x.x_pos,x.y_pos-200):13===e.keyCode?J(void 0,x.x_pos,x.y_pos+200):45===e.keyCode&&J(void 0,x.x_pos-200,x.y_pos+200)}),!1),r.a.createElement("div",{className:"container"},r.a.createElement(Q,{draggedRow:ae,addNode:J,references:v,setReferences:w,className:"references"}),r.a.createElement("div",{className:"map-container"},r.a.createElement(H,{selectedNode:x,updateNode:W,addNode:J,saveMap:function(){var e=h.map((function(e){return{node1_Id:e.startId,node2_Id:e.endId}})),t=JSON.stringify({nodes:n,edges:e});fetch("http://localhost:9898/libraries/current/map",{method:"PUT",headers:{"Content-Type":"application/json"},body:t})},deleteNode:function(){void 0!==x.id&&-1!==x.id&&(o(n.filter((function(e){return e.id!==x.id}))),g(h.filter((function(e){return e.startId!==x.id&&e.endId!==x.id}))),I(n[0]))},searchNodes:function(e){var t=e.target.value,a=[];""!==t?(n.forEach((function(e){e.label.indexOf(t)>-1&&a.push(e.id)})),U(a)):U(a)},linking:A,setLinking:X,unlinking:z,setUnlinking:D}),r.a.createElement("div",{onDrop:function(e){Z.current.setPointersPositions(e);var t=Z.current.getPointerPosition(),n=t.x,a=t.y;J(ae.current,n-.25*te-75,a)},onDragOver:function(e){return e.preventDefault()}},r.a.createElement(p.Stage,{style:{left:"25%",position:"absolute",top:"64px",margin:0,padding:0},width:.75*ne,height:te-64,ref:Z},r.a.createElement(p.Layer,{ref:$},r.a.createElement(_,{nodes:n,edges:h,updateEdges:function(e,t,n){var a=h.map((function(a){return a.startId===e?Object(u.a)(Object(u.a)({},a),{},{startX:t,startY:n}):a.endId===e?Object(u.a)(Object(u.a)({},a),{},{endX:t,endY:n}):a}));g(a)},updateNode:W,selectedNodeId:x.id,setSelectedNode:F,updateSearchIndex:U})))),x.id?r.a.createElement(q,{node:x,reference:function(e){var t,n=Object(m.a)(v);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.citekey===e)return a}}catch(r){n.e(r)}finally{n.f()}}(x.citationKey),updateNode:W,changeNodeColor:function(e,t){!function(e,t){var a=n.map((function(n){return n.id===e?Object(u.a)(Object(u.a)({},n),{},{colour:t}):n}));o(a)}(x.id,e.hex)}}):r.a.createElement(q,{node:x,updateNode:W})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[173,1,2]]]);
//# sourceMappingURL=main.1d1244cd.chunk.js.map